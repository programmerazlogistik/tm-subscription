---
title: "Lightbox"
description: "A responsive lightbox component for displaying images in a modal with navigation capabilities"
---

import { LightboxPreviewExample } from "../../preview/Lightbox.preview";

## Usage

<LightboxPreviewExample />

```jsx
import {
  LightboxPreview,
  LightboxProvider,
  LightboxTrigger,
  useLightbox,
} from "@muatmuat/ui/Lightbox";

function Example() {
  const images = [
    "https://images.unsplash.com/photo-1501854140801-50d01698450b?w=800&h=600&fit=crop",
    "https://images.unsplash.com/photo-1470071459604-3b5ec3a7fe05?w=800&h=600&fit=crop",
    "https://images.unsplash.com/photo-1426604966848-d7adac402bff?w=800&h=600&fit=crop",
  ];

  return (
    <LightboxProvider title="Image Gallery" images={images} variant="shipper">
      <div className="grid grid-cols-2 gap-4">
        {images.map((image, index) => (
          <LightboxPreview
            key={index}
            image={image}
            index={index}
            alt={`Sample image ${index + 1}`}
          />
        ))}
      </div>

      <div className="mt-6">
        <LightboxTrigger>
          <button className="rounded-lg bg-primary-700 px-6 py-3 text-white">
            Open Gallery
          </button>
        </LightboxTrigger>
      </div>
    </LightboxProvider>
  );
}

// Hook usage
function CustomComponent() {
  const { openLightbox, closeLightbox, next, prev, images, current } =
    useLightbox();

  return (
    <div>
      <button onClick={() => openLightbox(0)}>Open Lightbox</button>
      <button onClick={next}>Next</button>
      <button onClick={prev}>Previous</button>
      <button onClick={closeLightbox}>Close</button>
    </div>
  );
}
```

## API Reference

### LightboxProvider Props

| Prop     | Type                                    | Default     | Description                                                   |
| -------- | --------------------------------------- | ----------- | ------------------------------------------------------------- |
| title    | `string \| ((index: number) => string)` | -           | Title displayed in lightbox header, can be static or function |
| images   | `string[]`                              | `[]`        | Array of image URLs to display in the lightbox                |
| image    | `string \| null`                        | -           | Single image URL (alternative to images array)                |
| children | `React.ReactNode`                       | -           | Child components that can access lightbox context             |
| variant  | `"shipper" \| "square"`                 | `"shipper"` | Visual style variant of the lightbox                          |

### LightboxPreview Props

| Prop      | Type                    | Default     | Description                               |
| --------- | ----------------------- | ----------- | ----------------------------------------- |
| image     | `string`                | -           | Image URL to display as preview thumbnail |
| index     | `number`                | `0`         | Index of image in the lightbox array      |
| className | `string`                | -           | Additional CSS classes                    |
| alt       | `string`                | -           | Alt text for the preview image            |
| variant   | `"shipper" \| "square"` | `"shipper"` | Visual style variant                      |

### LightboxTrigger Props

| Prop      | Type                    | Default     | Description             |
| --------- | ----------------------- | ----------- | ----------------------- |
| children  | `React.ReactNode`       | -           | Trigger element content |
| \_variant | `"shipper" \| "square"` | `"shipper"` | Internal variant prop   |

### useLightbox Hook Returns

| Property      | Type                      | Description                                 |
| ------------- | ------------------------- | ------------------------------------------- |
| images        | `string[]`                | Array of images in the lightbox             |
| current       | `number`                  | Current image index                         |
| open          | `boolean`                 | Whether lightbox is open                    |
| openLightbox  | `(index: number) => void` | Function to open lightbox at specific index |
| closeLightbox | `() => void`              | Function to close lightbox                  |
| next          | `() => void`              | Function to navigate to next image          |
| prev          | `() => void`              | Function to navigate to previous image      |

### Types

```typescript
interface LightboxContextValue {
  images: string[];
  current: number;
  open: boolean;
  openLightbox: (index: number) => void;
  closeLightbox: () => void;
  next: () => void;
  prev: () => void;
}

interface LightboxProviderProps {
  title: string | ((index: number) => string);
  images?: string[];
  image?: string | null;
  children: React.ReactNode;
  variant?: "shipper" | "square";
}

interface LightboxPreviewProps {
  image: string;
  index?: number;
  className?: string;
  alt?: string;
  variant?: "shipper" | "square";
}

interface LightboxTriggerProps {
  children: React.ReactNode;
  _variant?: "shipper" | "square";
}
```

## Behavior

- Provides context-based API for managing image gallery state
- Supports both single image and multiple image galleries
- Responsive design with different layouts for mobile and desktop
- Mobile: Full-screen overlay with swipe gestures
- Desktop: Modal with image preview thumbnails and navigation controls
- Keyboard navigation support (arrow keys, escape)
- Proper focus management and accessibility features
- Visual zoom icon overlay on preview thumbnails
- Dynamic title support that can change based on current image index
- Smooth transitions and animations between images
- Support for both shipper and square visual variants

**Variants**: Shipper (standard gallery) and Square (compact square format)
**Sizes**: Responsive - mobile full-screen, desktop modal (592px wide for shipper, variable for square)
**Key Guidelines**: Use for image galleries, product image viewers, document previews, and any scenario requiring full-screen image viewing

## Component Code

```tsx
import { createContext, useContext, useMemo, useState } from "react";

import { useDevice } from "@muatmuat/hooks/use-device";
import { cn } from "@muatmuat/lib/utils";
import { cva } from "class-variance-authority";
import { ChevronLeft, ChevronRight } from "lucide-react";

import { IconComponent } from "../IconComponent";
import { ImageComponent } from "../ImageComponent";
import { Modal, ModalContent } from "../Modal";

interface LightboxContextValue {
  images: string[];
  current: number;
  open: boolean;
  openLightbox: (index: number) => void;
  closeLightbox: () => void;
  next: () => void;
  prev: () => void;
}

const LightboxContext = createContext<LightboxContextValue | null>(null);

interface LightboxProviderProps {
  title: string | ((index: number) => string);
  images?: string[];
  image?: string | null;
  children: React.ReactNode;
  variant?: "shipper" | "square";
}

export const lightboxModalVariants = cva(
  "flex w-screen flex-col items-center md:w-[592px] md:bg-white md:px-6 md:pb-3 md:pt-8",
  {
    variants: {
      variant: {
        shipper: "",
        square: "md:w-fit md:pb-[23px]",
      },
    },
    defaultVariants: { variant: "shipper" },
  }
);

export const lightboxTitleVariants = cva(
  "mb-3 hidden text-center text-base font-bold leading-[1.2] md:block",
  {
    variants: { variant: { shipper: "", square: "" } },
    defaultVariants: { variant: "shipper" },
  }
);

export const lightboxImageVariants = cva(
  "w-full object-cover md:h-[306px] md:w-[544px] md:rounded-[9px]",
  {
    variants: {
      variant: {
        shipper: "",
        square: "md:h-[364px] md:w-[364px] md:object-cover",
      },
    },
    defaultVariants: { variant: "shipper" },
  }
);

export const lightboxNavButtonVariants = cva(
  "absolute top-1/2 hidden size-8 -translate-y-1/2 items-center justify-center rounded-full bg-white shadow-lg md:flex",
  {
    variants: {
      variant: { shipper: "", square: "" },
      position: { left: "-left-3", right: "-right-3" },
    },
    defaultVariants: { variant: "shipper", position: "left" },
  }
);

export const lightboxPreviewThumbVariants = cva(
  "size-[56px] cursor-pointer rounded-[6px] border-2 border-neutral-400 object-cover",
  {
    variants: {
      variant: { shipper: "", square: "" },
      active: { true: "border-primary-700", false: "" },
    },
    defaultVariants: { variant: "shipper", active: false },
  }
);

export const lightboxPreviewRootVariants = cva("relative block w-fit", {
  variants: { variant: { shipper: "", square: "" } },
  defaultVariants: { variant: "shipper" },
});

export const lightboxPreviewImageVariants = cva(
  "size-[68px] rounded-xl border border-neutral-400 object-contain",
  {
    variants: { variant: { shipper: "", square: "" } },
    defaultVariants: { variant: "shipper" },
  }
);

export const lightboxPreviewIconVariants = cva(
  "absolute right-1 top-1 flex size-5 cursor-pointer items-center justify-center rounded-full bg-white",
  {
    variants: { variant: { shipper: "", square: "" } },
    defaultVariants: { variant: "shipper" },
  }
);

export const LightboxProvider: React.FC<LightboxProviderProps> = ({
  title,
  images = [],
  image,
  children,
  variant = "shipper",
}) => {
  const { isMobile, mounted } = useDevice();
  const [open, setOpen] = useState(false);
  const [current, setCurrent] = useState(0);

  const openLightbox = (index: number) => {
    setCurrent(index);
    setOpen(true);
  };

  const closeLightbox = () => setOpen(false);
  const next = () => setCurrent((prev) => (prev + 1) % images.length);
  const prev = () =>
    setCurrent((prev) => (prev - 1 + images.length) % images.length);

  const memoizedImages = useMemo(() => {
    if (image) {
      return [image];
    }
    return images;
  }, [image, images]);

  const displayTitle = useMemo(() => {
    if (typeof title === "function") {
      return title(current);
    }
    return title;
  }, [current, title]);

  if (!mounted) return null;

  return (
    <LightboxContext.Provider
      value={{
        images: memoizedImages,
        current,
        open,
        openLightbox,
        closeLightbox,
        next,
        prev,
      }}
    >
      {children}

      <Modal
        open={open}
        onOpenChange={closeLightbox}
        closeOnOutsideClick={!isMobile}
        withCloseButton={!isMobile}
      >
        <ModalContent
          appearance={{
            backgroundClassName: "bg-black md:bg-black/25",
          }}
          className={cn(
            lightboxModalVariants({ variant }),
            "rounded-none bg-white md:rounded-xl"
          )}
          type="lightbox"
        >
          <h1 className={lightboxTitleVariants({ variant })}>{displayTitle}</h1>
          <div className="relative w-full bg-white">
            <ImageComponent
              src={memoizedImages[current]}
              className={cn(lightboxImageVariants({ variant }))}
              alt=""
              unoptimized
            />
            {memoizedImages.length > 1 && (
              <>
                <button
                  className={lightboxNavButtonVariants({
                    variant,
                    position: "left",
                  })}
                  onClick={prev}
                >
                  <ChevronLeft className="size-6" />
                </button>
                <button
                  className={lightboxNavButtonVariants({
                    variant,
                    position: "right",
                  })}
                  onClick={next}
                >
                  <ChevronRight className="size-6" />
                </button>
              </>
            )}
          </div>
          {/* Previews of images */}
          {memoizedImages.length > 1 && (
            <div className="mt-3 hidden justify-center gap-2 md:flex md:flex-row">
              {memoizedImages.map((image, index) => (
                <div
                  key={`${index}_${image}`}
                  className="cursor-pointer"
                  onClick={() => setCurrent(index)}
                >
                  <ImageComponent
                    src={image}
                    className={lightboxPreviewThumbVariants({
                      variant,
                      active: current === index,
                    })}
                    alt=""
                  />
                </div>
              ))}
            </div>
          )}
        </ModalContent>
      </Modal>
    </LightboxContext.Provider>
  );
};

export const useLightbox = (): LightboxContextValue => {
  const context = useContext(LightboxContext);
  if (!context)
    throw new Error("useLightbox must be used within a LightboxProvider");
  return context;
};

interface LightboxPreviewProps {
  image: string;
  index?: number;
  className?: string;
  alt?: string;
  variant?: "shipper" | "square";
}

export const LightboxPreview: React.FC<LightboxPreviewProps> = ({
  image,
  index = 0,
  className,
  alt,
  variant = "shipper",
}) => {
  const { openLightbox } = useLightbox();

  return (
    <div className={cn(lightboxPreviewRootVariants({ variant }))}>
      <ImageComponent
        className={cn(lightboxPreviewImageVariants({ variant }), className)}
        src={image}
        alt={alt}
        unoptimized
      />
      <div
        onClick={(e) => {
          e.stopPropagation();
          openLightbox(index);
        }}
        className={lightboxPreviewIconVariants({ variant })}
      >
        <IconComponent
          src="/icons/zoom12.svg"
          width={12}
          height={12}
          className="text-neutral-700"
        />
      </div>
    </div>
  );
};

interface LightboxTriggerProps {
  children: React.ReactNode;
  _variant?: "shipper" | "square";
}

export const LightboxTrigger: React.FC<LightboxTriggerProps> = ({
  children,
  _variant = "shipper",
}) => {
  const { openLightbox } = useLightbox();

  return <div onClick={() => openLightbox(0)}>{children}</div>;
};
```
